<FluentHeader Style="margin-bottom:5px;">
    @Header
    <FluentSpacer Width="10" />
    <FluentCheckbox @bind-Value:get="@ShowNarrative" @bind-Value:set="@OnValueChanged">@showHideNarrative</FluentCheckbox>
</FluentHeader>

<FluentCard hidden="@hideNarrative" MinimalStyle="true" Height="auto" Style="margin-bottom:5px;">
    <FluentStack Orientation="Orientation.Vertical">
        <div class="@narrativeClass">
            @ChildContent
        </div>
    </FluentStack>
</FluentCard>

<style>
    .hidden {
        display: none;
    }
</style>

@code {
    private string narrativeClass => ShowNarrative ? "" : "hidden";
    private string showHideNarrative => ShowNarrative ? "Hide Info" : "Show Info";
    private bool hideNarrative => !ShowNarrative;

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter, EditorRequired]
    public string Header { get; set; }

    [Parameter]
    public bool ShowNarrative { get; set; } = true;

    [Parameter]
    public EventCallback<bool> ShowNarrativeChanged { get; set; }

    private async Task OnValueChanged(bool value)
    {
        ShowNarrative = value;
        await ShowNarrativeChanged.InvokeAsync(value);
    }
}
